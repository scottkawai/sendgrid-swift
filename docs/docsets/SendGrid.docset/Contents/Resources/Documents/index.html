<!DOCTYPE html>
<html lang="en">
  <head>
    <title>SendGrid  Reference</title>
    <link rel="stylesheet" type="text/css" href="css/jazzy.css" />
    <link rel="stylesheet" type="text/css" href="css/highlight.css" />
    <meta charset='utf-8'>
    <script src="js/jquery.min.js" defer></script>
    <script src="js/jazzy.js" defer></script>
    
  </head>
  <body>
    <a title="SendGrid  Reference"></a>
    <header>
      <div class="content-wrapper">
        <p><a href="index.html">SendGrid Docs</a> (100% documented)</p>
      </div>
    </header>
    <div class="content-wrapper">
      <p id="breadcrumbs">
        <a href="index.html">SendGrid Reference</a>
        <img id="carat" src="img/carat.png" />
        SendGrid  Reference
      </p>
    </div>
    <div class="content-wrapper">
      <nav class="sidebar">
        <ul class="nav-groups">
          <li class="nav-group-name">
            <a href="Classes.html">Classes</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Classes/APIV3.html">APIV3</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/Attachment.html">Attachment</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/BCCSetting.html">BCCSetting</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/BypassListManagement.html">BypassListManagement</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/ClickTracking.html">ClickTracking</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/Email.html">Email</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/Footer.html">Footer</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/GoogleAnalytics.html">GoogleAnalytics</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/OpenTracking.html">OpenTracking</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/Personalization.html">Personalization</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/Response.html">Response</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/SandboxMode.html">SandboxMode</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/Session.html">Session</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/Setting.html">Setting</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/SpamChecker.html">SpamChecker</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/SubscriptionTracking.html">SubscriptionTracking</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Enums.html">Enums</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Enums/Authentication.html">Authentication</a>
              </li>
              <li class="nav-group-task">
                <a href="Enums/ContentDisposition.html">ContentDisposition</a>
              </li>
              <li class="nav-group-task">
                <a href="Enums/ContentType.html">ContentType</a>
              </li>
              <li class="nav-group-task">
                <a href="Enums/HTTPMethod.html">HTTPMethod</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Protocols.html">Protocols</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Protocols/DictionaryConvertible.html">DictionaryConvertible</a>
              </li>
              <li class="nav-group-task">
                <a href="Protocols/HTTPMessage.html">HTTPMessage</a>
              </li>
              <li class="nav-group-task">
                <a href="Protocols/HeaderValidator.html">HeaderValidator</a>
              </li>
              <li class="nav-group-task">
                <a href="Protocols/JSONConvertible.html">JSONConvertible</a>
              </li>
              <li class="nav-group-task">
                <a href="Protocols/MailSetting.html">MailSetting</a>
              </li>
              <li class="nav-group-task">
                <a href="Protocols/Request.html">Request</a>
              </li>
              <li class="nav-group-task">
                <a href="Protocols/Scheduling.html">Scheduling</a>
              </li>
              <li class="nav-group-task">
                <a href="Protocols/TrackingSetting.html">TrackingSetting</a>
              </li>
              <li class="nav-group-task">
                <a href="Protocols/Validatable.html">Validatable</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Structs.html">Structs</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Structs/APIBlueprint.html">APIBlueprint</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/ASM.html">ASM</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/Address.html">Address</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/Constants.html">Constants</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/Content.html">Content</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/Error.html">Error</a>
              </li>
              <li class="nav-group-task">
                <a href="Structs/RateLimit.html">RateLimit</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Typealiases.html">Typealiases</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Typealiases.html#/s:8SendGrid15ResponseHandler">ResponseHandler</a>
              </li>
            </ul>
          </li>
        </ul>
      </nav>
      <article class="main-content">
        <section>
          <section class="section">
            
            <a href='#sendgrid_swift' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h1 id='sendgrid_swift'>SendGrid-Swift</h1>

<p>This library allows you to quickly and easily send emails through SendGrid using Swift.</p>
<a href='#important_breaking_changes' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h2 id='important_breaking_changes'>Important: Breaking Changes</h2>

<p>Version 0.1.0 and higher have been migrated over to use SendGrid&rsquo;s <a href="https://sendgrid.com/docs/API_Reference/Web_API_v3/Mail/index.html">V3 Mail Send Endpoint</a>, which contains code-breaking changes.</p>
<a href='#full_documentation' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h2 id='full_documentation'>Full Documentation</h2>

<p>Full documentation of the library is available <a href="http://scottkawai.github.io/sendgrid-swift/docs/">here</a>.</p>
<a href='#table_of_contents' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h2 id='table_of_contents'>Table Of Contents</h2>

<ul>
<li><a href="#installation">Installation</a>

<ul>
<li><a href="#with-cocoapods">With Cocoapods</a></li>
<li><a href="#as-a-submodule">As A Submodule</a></li>
</ul></li>
<li><a href="#usage">Usage</a>

<ul>
<li><a href="#authorization">Authorization</a></li>
<li><a href="#content">Content</a></li>
<li><a href="#personalizations">Personalizations</a></li>
<li><a href="#attachments">Attachments</a></li>
<li><a href="#mail-and-tracking-settings">Mail and Tracking Settings</a></li>
<li><a href="#unsubscribe-groups-asm">Unsubscribe Groups (ASM)</a></li>
<li><a href="#ip-pools">IP Pools</a></li>
<li><a href="#scheduled-sends">Scheduled Sends</a></li>
<li><a href="#categories">Categories</a></li>
<li><a href="#sections">Sections</a></li>
<li><a href="#template-engine">Template Engine</a></li>
</ul></li>
<li><a href="#contributing">Contributing</a></li>
<li><a href="#license">License</a></li>
</ul>
<a href='#installation' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h2 id='installation'>Installation</h2>
<a href='#with_cocoapods' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h3 id='with_cocoapods'>With Cocoapods</h3>

<p>Add the following to your Podfile:</p>
<pre class="highlight plaintext"><code>pod 'SendGrid', :git =&gt; 'https://github.com/scottkawai/sendgrid-swift.git'
</code></pre>
<a href='#as_a_submodule' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h3 id='as_a_submodule'>As A Submodule</h3>

<p>Add this repo as a submodule to your project and update:</p>
<pre class="highlight shell"><code><span class="nb">cd</span> /path/to/your/project
git submodule add https://github.com/scottkawai/sendgrid-swift.git
</code></pre>

<p>This will add a <code>sendgrid-swift</code> folder to your directory. Next, you need to add all the Swift files under <code>/sendgrid-swift/Sources/</code> to your project.</p>
<a href='#usage' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h2 id='usage'>Usage</h2>
<a href='#authorization' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h3 id='authorization'>Authorization</h3>

<p>The V3 endpoint supports API keys for authorization (<strong><em>Note</em></strong>: username and passwords cannot be used for authorization).  Using the <code>Session</code> class, you can configure an instance with your API key to be used over and over again to send email requests:</p>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">session</span> <span class="o">=</span> <span class="kt">Session</span><span class="p">()</span>
<span class="n">session</span><span class="o">.</span><span class="n">authentication</span> <span class="o">=</span> <span class="kt">Authentication</span><span class="o">.</span><span class="kt">ApiKey</span><span class="p">(</span><span class="s">"SG.abcdefghijklmnop.qrstuvwxyz012345-6789"</span><span class="p">)</span>

<span class="cm">/*
`Session` also has a singleton instance that you can configure once and reuse throughout your code.
*/</span>
<span class="kt">Session</span><span class="o">.</span><span class="n">sharedInstance</span><span class="o">.</span><span class="n">authentication</span> <span class="o">=</span> <span class="kt">Authentication</span><span class="o">.</span><span class="kt">ApiKey</span><span class="p">(</span><span class="s">"SG.abcdefghijklmnop.qrstuvwxyz012345-6789"</span><span class="p">)</span>
</code></pre>
<a href='#content' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h3 id='content'>Content</h3>

<p>To specify the content of an email, use the <code>Content</code> class. In general, an email will have plain text and/or HTML text content, however you can specify other types of content, such as an ICS calendar invite. Following RFC 1341, section 7.2, if either HTML or plain text content are to be sent in your email: the plain text content needs to be first, followed by the HTML content, followed by any other content.</p>
<a href='#personalizations' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h3 id='personalizations'>Personalizations</h3>

<p>The new V3 endpoint introduces the idea of <q>personalizations.</q>  When using the API, you define a set of global characteristics for the email, and then also define seperate personalizations, which contain recipient-specific information for the email. Since personalizations contain the recipients of the email, each request must contain at least 1 personalization.</p>
<pre class="highlight swift"><code><span class="c1">// Send a basic example</span>
<span class="k">let</span> <span class="nv">personalization</span> <span class="o">=</span> <span class="kt">Personalization</span><span class="p">(</span><span class="nv">recipients</span><span class="p">:</span> <span class="s">"test@example.com"</span><span class="p">)</span>
<span class="k">let</span> <span class="nv">plainText</span> <span class="o">=</span> <span class="kt">Content</span><span class="p">(</span><span class="nv">contentType</span><span class="p">:</span> <span class="kt">ContentType</span><span class="o">.</span><span class="kt">PlainText</span><span class="p">,</span> <span class="nv">value</span><span class="p">:</span> <span class="s">"Hello World"</span><span class="p">)</span>
<span class="k">let</span> <span class="nv">htmlText</span> <span class="o">=</span> <span class="kt">Content</span><span class="p">(</span><span class="nv">contentType</span><span class="p">:</span> <span class="kt">ContentType</span><span class="o">.</span><span class="kt">HTMLText</span><span class="p">,</span> <span class="nv">value</span><span class="p">:</span> <span class="s">"&lt;h1&gt;Hello World&lt;/h1&gt;"</span><span class="p">)</span>
<span class="k">let</span> <span class="nv">email</span> <span class="o">=</span> <span class="kt">Email</span><span class="p">(</span>
    <span class="nv">personalizations</span><span class="p">:</span> <span class="p">[</span><span class="n">personalization</span><span class="p">],</span>
    <span class="nv">from</span><span class="p">:</span> <span class="kt">Address</span><span class="p">(</span><span class="nv">emailAddress</span><span class="p">:</span> <span class="s">"foo@bar.com"</span><span class="p">),</span>
    <span class="nv">content</span><span class="p">:</span> <span class="p">[</span><span class="n">plainText</span><span class="p">,</span> <span class="n">htmlText</span><span class="p">],</span>
    <span class="nv">subject</span><span class="p">:</span> <span class="s">"Hello World"</span>
<span class="p">)</span>
<span class="k">do</span> <span class="p">{</span>
    <span class="k">try</span> <span class="kt">Session</span><span class="o">.</span><span class="n">sharedInstance</span><span class="o">.</span><span class="nf">send</span><span class="p">(</span><span class="n">email</span><span class="p">)</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">{</span>
    <span class="nf">print</span><span class="p">(</span><span class="n">error</span><span class="p">)</span>
<span class="p">}</span>
</code></pre>

<p>An <code>Email</code> instance can have up to 1000 <code>Personalization</code> instances. A <code>Personalization</code> can be thought of an individual email.  It can contain several <code>to</code> addresses, along with <code>cc</code> and <code>bcc</code> addresses.  Keep in mind that if you put two addresses in a single <code>Personalization</code> instance, each recipient will be able to see each other&rsquo;s email address.  If you want to send to several recipients where each recipient only sees their own address, you&rsquo;ll want to create a seperate <code>Personalization</code> instance for each recipient.</p>

<p>The <code>Personalization</code> class also allows personalizing certain email attributes, including:</p>

<ul>
<li>Subject</li>
<li>Headers</li>
<li>Substitution tags</li>
<li><a href="https://sendgrid.com/docs/API_Reference/SMTP_API/unique_arguments.html">Custom arguments</a></li>
<li>Scheduled sends</li>
</ul>

<p>If a <code>Personalization</code> instance contains an email attribute that is also defined globally in the request (such as the subject), the <code>Personalization</code> instance&rsquo;s value takes priority.</p>

<p>Here is an advanced example of using personalizations:</p>
<pre class="highlight swift"><code><span class="c1">// Send an advanced example</span>
<span class="k">let</span> <span class="nv">recipients</span> <span class="o">=</span> <span class="p">[</span>
    <span class="kt">Address</span><span class="p">(</span><span class="nv">emailAddress</span><span class="p">:</span> <span class="s">"jose@example.none"</span><span class="p">,</span> <span class="nv">displayName</span><span class="p">:</span> <span class="s">"Jose"</span><span class="p">),</span>
    <span class="kt">Address</span><span class="p">(</span><span class="nv">emailAddress</span><span class="p">:</span> <span class="s">"isaac@example.none"</span><span class="p">,</span> <span class="nv">displayName</span><span class="p">:</span> <span class="s">"Isaac"</span><span class="p">),</span>
    <span class="kt">Address</span><span class="p">(</span><span class="nv">emailAddress</span><span class="p">:</span> <span class="s">"tim@example.none"</span><span class="p">,</span> <span class="nv">displayName</span><span class="p">:</span> <span class="s">"Tim"</span><span class="p">)</span>
<span class="p">]</span>
<span class="k">let</span> <span class="nv">personalizations</span> <span class="o">=</span> <span class="n">recipients</span><span class="o">.</span><span class="n">map</span> <span class="p">{</span> <span class="p">(</span><span class="n">recipient</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">Personalization</span> <span class="k">in</span>
    <span class="k">let</span> <span class="nv">name</span> <span class="o">=</span> <span class="n">recipient</span><span class="o">.</span><span class="n">name</span> <span class="p">??</span> <span class="s">"there"</span>
    <span class="k">return</span> <span class="kt">Personalization</span><span class="p">(</span>
        <span class="nv">to</span><span class="p">:</span> <span class="p">[</span><span class="n">recipient</span><span class="p">],</span>
        <span class="nv">cc</span><span class="p">:</span> <span class="kc">nil</span><span class="p">,</span>
        <span class="nv">bcc</span><span class="p">:</span> <span class="p">[</span><span class="kt">Address</span><span class="p">(</span><span class="nv">emailAddress</span><span class="p">:</span> <span class="s">"bcc@example.none"</span><span class="p">)],</span>
        <span class="nv">subject</span><span class="p">:</span> <span class="s">"Hello </span><span class="se">\(</span><span class="n">name</span><span class="se">)</span><span class="s">!"</span><span class="p">,</span>
        <span class="nv">headers</span><span class="p">:</span> <span class="p">[</span><span class="s">"X-Campaign"</span><span class="p">:</span><span class="s">"12345"</span><span class="p">],</span>
        <span class="nv">substitutions</span><span class="p">:</span> <span class="p">[</span><span class="s">"%name%"</span><span class="p">:</span><span class="n">name</span><span class="p">],</span>
        <span class="nv">customArguments</span><span class="p">:</span> <span class="p">[</span><span class="s">"campaign_id"</span><span class="p">:</span><span class="s">"12345"</span><span class="p">]</span>
    <span class="p">)</span>
<span class="p">}</span>
<span class="k">let</span> <span class="nv">contents</span> <span class="o">=</span> <span class="kt">Content</span><span class="o">.</span><span class="nf">emailContent</span><span class="p">(</span>
    <span class="nv">plain</span><span class="p">:</span> <span class="s">"Hello %name%,</span><span class="se">\n\n</span><span class="s">How are you?</span><span class="se">\n\n</span><span class="s">Best,</span><span class="se">\n</span><span class="s">Sender"</span><span class="p">,</span>
    <span class="nv">html</span><span class="p">:</span> <span class="s">"&lt;p&gt;Hello %name%,&lt;/p&gt;&lt;p&gt;How are you?&lt;/p&gt;&lt;p&gt;Best,&lt;br&gt;Sender&lt;/p&gt;"</span>
<span class="p">)</span>
<span class="k">let</span> <span class="nv">email</span> <span class="o">=</span> <span class="kt">Email</span><span class="p">(</span>
    <span class="nv">personalizations</span><span class="p">:</span> <span class="n">personalizations</span><span class="p">,</span>
    <span class="nv">from</span><span class="p">:</span> <span class="kt">Address</span><span class="p">(</span><span class="nv">emailAddress</span><span class="p">:</span> <span class="s">"sender@example.none"</span><span class="p">),</span>
    <span class="nv">content</span><span class="p">:</span> <span class="n">contents</span><span class="p">,</span>
    <span class="nv">subject</span><span class="p">:</span> <span class="kc">nil</span>
<span class="p">)</span>
<span class="n">email</span><span class="o">.</span><span class="n">headers</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s">"X-Campaign"</span><span class="p">:</span> <span class="s">"12345"</span>
<span class="p">]</span>
<span class="n">email</span><span class="o">.</span><span class="n">customArguments</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s">"campaign_id"</span><span class="p">:</span> <span class="s">"12345"</span>
<span class="p">]</span>
<span class="k">do</span> <span class="p">{</span>
    <span class="k">try</span> <span class="kt">Session</span><span class="o">.</span><span class="n">sharedInstance</span><span class="o">.</span><span class="nf">send</span><span class="p">(</span><span class="n">email</span><span class="p">,</span> <span class="nv">onComplete</span><span class="p">:</span> <span class="p">{</span> <span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="n">error</span><span class="p">)</span> <span class="k">in</span>
        <span class="nf">print</span><span class="p">(</span><span class="n">response</span><span class="p">?</span><span class="o">.</span><span class="n">stringValue</span><span class="p">)</span>
    <span class="p">})</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">{</span>
    <span class="nf">print</span><span class="p">(</span><span class="n">error</span><span class="p">)</span>
<span class="p">}</span>
</code></pre>

<p>You&rsquo;ll notice in the example above, the global email defines custom headers and custom arguments. In addition, each personalization defines some headers and custom arguments. For the resulting email, the headers and custom arguments will be merged together. In the event of a conflict, the personalization&rsquo;s values will be used.</p>
<a href='#attachments' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h3 id='attachments'>Attachments</h3>

<p>The <code>Attachment</code> class allows you to easily add attachments to an email. All you need is to convert your desired attachment into <code>NSData</code> and initialize it like so:</p>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">personalization</span> <span class="o">=</span> <span class="kt">Personalization</span><span class="p">(</span><span class="nv">recipients</span><span class="p">:</span> <span class="s">"test@example.com"</span><span class="p">)</span>
<span class="k">let</span> <span class="nv">contents</span> <span class="o">=</span> <span class="kt">Content</span><span class="o">.</span><span class="nf">emailContent</span><span class="p">(</span>
    <span class="nv">plain</span><span class="p">:</span> <span class="s">"Hello World"</span><span class="p">,</span>
    <span class="nv">html</span><span class="p">:</span> <span class="s">"&lt;h1&gt;Hello World&lt;/h1&gt;"</span>
<span class="p">)</span>
<span class="k">let</span> <span class="nv">email</span> <span class="o">=</span> <span class="kt">Email</span><span class="p">(</span>
    <span class="nv">personalizations</span><span class="p">:</span> <span class="p">[</span><span class="n">personalization</span><span class="p">],</span>
    <span class="nv">from</span><span class="p">:</span> <span class="kt">Address</span><span class="p">(</span><span class="nv">emailAddress</span><span class="p">:</span> <span class="s">"foo@bar.com"</span><span class="p">),</span>
    <span class="nv">content</span><span class="p">:</span> <span class="n">contents</span><span class="p">,</span>
    <span class="nv">subject</span><span class="p">:</span> <span class="s">"Hello World"</span>
<span class="p">)</span>
<span class="k">if</span> <span class="k">let</span> <span class="nv">path</span> <span class="o">=</span> <span class="kt">NSBundle</span><span class="o">.</span><span class="nf">mainBundle</span><span class="p">()</span><span class="o">.</span><span class="nf">pathForResource</span><span class="p">(</span><span class="s">"proposal"</span><span class="p">,</span> <span class="nv">ofType</span><span class="p">:</span> <span class="s">"pdf"</span><span class="p">),</span>
    <span class="n">pdf</span> <span class="o">=</span> <span class="kt">NSData</span><span class="p">(</span><span class="nv">contentsOfFile</span><span class="p">:</span> <span class="n">path</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">let</span> <span class="nv">attachment</span> <span class="o">=</span> <span class="kt">Attachment</span><span class="p">(</span>
        <span class="nv">filename</span><span class="p">:</span> <span class="s">"proposal.pdf"</span><span class="p">,</span>
        <span class="nv">content</span><span class="p">:</span> <span class="n">pdf</span><span class="p">,</span>
        <span class="nv">disposition</span><span class="p">:</span> <span class="o">.</span><span class="kt">Attachment</span><span class="p">,</span>
        <span class="nv">type</span><span class="p">:</span> <span class="o">.</span><span class="kt">PDF</span><span class="p">,</span>
        <span class="nv">contentID</span><span class="p">:</span> <span class="kc">nil</span>
    <span class="p">)</span>
    <span class="n">email</span><span class="o">.</span><span class="n">attachments</span> <span class="o">=</span> <span class="p">[</span><span class="n">attachment</span><span class="p">]</span>
<span class="p">}</span>
<span class="k">do</span> <span class="p">{</span>
    <span class="k">try</span> <span class="kt">Session</span><span class="o">.</span><span class="n">sharedInstance</span><span class="o">.</span><span class="nf">send</span><span class="p">(</span><span class="n">email</span><span class="p">,</span> <span class="nv">onComplete</span><span class="p">:</span> <span class="p">{</span> <span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="n">error</span><span class="p">)</span> <span class="k">in</span>
        <span class="nf">print</span><span class="p">(</span><span class="n">response</span><span class="p">?</span><span class="o">.</span><span class="n">stringValue</span><span class="p">)</span>
    <span class="p">})</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">{</span>
    <span class="nf">print</span><span class="p">(</span><span class="n">error</span><span class="p">)</span>
<span class="p">}</span>
</code></pre>

<p>You can also use attachments as inline images by setting the <code>disposition</code> property to <code>.Inline</code> and setting the <code>cid</code> property.  You can then reference that unique CID in your HTML like so:</p>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">personalization</span> <span class="o">=</span> <span class="kt">Personalization</span><span class="p">(</span><span class="nv">recipients</span><span class="p">:</span> <span class="s">"test@example.com"</span><span class="p">)</span>
<span class="k">let</span> <span class="nv">contents</span> <span class="o">=</span> <span class="kt">Content</span><span class="o">.</span><span class="nf">emailContent</span><span class="p">(</span>
    <span class="nv">plain</span><span class="p">:</span> <span class="s">"Hello World"</span><span class="p">,</span>
    <span class="nv">html</span><span class="p">:</span> <span class="s">"&lt;img src=</span><span class="se">\"</span><span class="s">cid:main_logo_12345</span><span class="se">\"</span><span class="s"> /&gt;&lt;h1&gt;Hello World&lt;/h1&gt;"</span>
<span class="p">)</span>
<span class="k">let</span> <span class="nv">email</span> <span class="o">=</span> <span class="kt">Email</span><span class="p">(</span>
    <span class="nv">personalizations</span><span class="p">:</span> <span class="p">[</span><span class="n">personalization</span><span class="p">],</span>
    <span class="nv">from</span><span class="p">:</span> <span class="kt">Address</span><span class="p">(</span><span class="nv">emailAddress</span><span class="p">:</span> <span class="s">"foo@bar.com"</span><span class="p">),</span>
    <span class="nv">content</span><span class="p">:</span> <span class="n">contents</span><span class="p">,</span>
    <span class="nv">subject</span><span class="p">:</span> <span class="s">"Hello World"</span>
<span class="p">)</span>
<span class="k">if</span> <span class="k">let</span> <span class="nv">path</span> <span class="o">=</span> <span class="kt">NSBundle</span><span class="o">.</span><span class="nf">mainBundle</span><span class="p">()</span><span class="o">.</span><span class="nf">pathForImageResource</span><span class="p">(</span><span class="s">"logo.png"</span><span class="p">),</span>
    <span class="n">logo</span> <span class="o">=</span> <span class="kt">NSData</span><span class="p">(</span><span class="nv">contentsOfFile</span><span class="p">:</span> <span class="n">path</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">let</span> <span class="nv">attachment</span> <span class="o">=</span> <span class="kt">Attachment</span><span class="p">(</span><span class="nv">filename</span><span class="p">:</span> <span class="s">"logo.png"</span><span class="p">,</span> <span class="nv">content</span><span class="p">:</span> <span class="n">logo</span><span class="p">,</span> <span class="nv">disposition</span><span class="p">:</span> <span class="o">.</span><span class="kt">Inline</span><span class="p">,</span> <span class="nv">type</span><span class="p">:</span> <span class="o">.</span><span class="kt">PNG</span><span class="p">,</span> <span class="nv">contentID</span><span class="p">:</span> <span class="s">"main_logo_12345"</span><span class="p">)</span>
    <span class="n">email</span><span class="o">.</span><span class="n">attachments</span> <span class="o">=</span> <span class="p">[</span><span class="n">attachment</span><span class="p">]</span>
<span class="p">}</span>
<span class="k">do</span> <span class="p">{</span>
    <span class="k">try</span> <span class="kt">Session</span><span class="o">.</span><span class="n">sharedInstance</span><span class="o">.</span><span class="nf">send</span><span class="p">(</span><span class="n">email</span><span class="p">,</span> <span class="nv">onComplete</span><span class="p">:</span> <span class="p">{</span> <span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="n">error</span><span class="p">)</span> <span class="k">in</span>
        <span class="nf">print</span><span class="p">(</span><span class="n">response</span><span class="p">?</span><span class="o">.</span><span class="n">stringValue</span><span class="p">)</span>
    <span class="p">})</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">{</span>
    <span class="nf">print</span><span class="p">(</span><span class="n">error</span><span class="p">)</span>
<span class="p">}</span>
</code></pre>
<a href='#mail_and_tracking_settings' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h3 id='mail_and_tracking_settings'>Mail and Tracking Settings</h3>

<p>There are various classes available that you can use to modify the <a href="https://sendgrid.com/docs/User_Guide/Settings/mail.html">mail</a> and <a href="https://sendgrid.com/docs/User_Guide/Settings/tracking.html">tracking</a> settings for a specific email.</p>

<p><strong>MAIL SETTINGS</strong></p>

<p>The following mail setting classes are available:</p>

<table><thead>
<tr>
<th>Setting</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>BCCSetting</code></td>
<td>This allows you to have a blind carbon copy automatically sent to the specified email address for every email that is sent.</td>
</tr>
<tr>
<td><code>BypassListManagement</code></td>
<td>Allows you to bypass all unsubscribe groups and suppressions to ensure that the email is delivered to every single recipient. This should only be used in emergencies when it is absolutely necessary that every recipient receives your email. Ex: outage emails, or forgot password emails.</td>
</tr>
<tr>
<td><code>Footer</code></td>
<td>The default footer that you would like appended to the bottom of every email.</td>
</tr>
<tr>
<td><code>SandboxMode</code></td>
<td>This allows you to send a test email to ensure that your request body is valid and formatted correctly. For more information, please see our <a href="https://sendgrid.com/docs/Classroom/Send/v3_Mail_Send/sandbox_mode.html">Classroom</a>.</td>
</tr>
<tr>
<td><code>SpamChecker</code></td>
<td>This allows you to test the content of your email for spam.</td>
</tr>
</tbody></table>

<p><strong>TRACKING SETTINGS</strong></p>

<p>The following tracking setting classes are available:</p>

<table><thead>
<tr>
<th>Setting</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><code>ClickTracking</code></td>
<td>Allows you to track whether a recipient clicked a link in your email.</td>
</tr>
<tr>
<td><code>GoogleAnalytics</code></td>
<td>Allows you to enable tracking provided by Google Analytics.</td>
</tr>
<tr>
<td><code>OpenTracking</code></td>
<td>Allows you to track whether the email was opened or not, but including a single pixel image in the body of the content. When the pixel is loaded, we can log that the email was opened.</td>
</tr>
<tr>
<td><code>SubscriptionTracking</code></td>
<td>Allows you to insert a subscription management link at the bottom of the text and html bodies of your email. If you would like to specify the location of the link within your email, you may specify a substitution tag.</td>
</tr>
</tbody></table>

<p><strong>EXAMPLE</strong></p>

<p>Each setting has its own properties that can be configured, but here&rsquo;s a basic example:</p>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">personalization</span> <span class="o">=</span> <span class="kt">Personalization</span><span class="p">(</span><span class="nv">recipients</span><span class="p">:</span> <span class="s">"test@example.com"</span><span class="p">)</span>
<span class="k">let</span> <span class="nv">contents</span> <span class="o">=</span> <span class="kt">Content</span><span class="o">.</span><span class="nf">emailContent</span><span class="p">(</span>
    <span class="nv">plain</span><span class="p">:</span> <span class="s">"Hello World"</span><span class="p">,</span>
    <span class="nv">html</span><span class="p">:</span> <span class="s">"&lt;h1&gt;Hello World&lt;/h1&gt;"</span>
<span class="p">)</span>
<span class="k">let</span> <span class="nv">email</span> <span class="o">=</span> <span class="kt">Email</span><span class="p">(</span>
    <span class="nv">personalizations</span><span class="p">:</span> <span class="p">[</span><span class="n">personalization</span><span class="p">],</span>
    <span class="nv">from</span><span class="p">:</span> <span class="kt">Address</span><span class="p">(</span><span class="nv">emailAddress</span><span class="p">:</span> <span class="s">"foo@bar.com"</span><span class="p">),</span>
    <span class="nv">content</span><span class="p">:</span> <span class="n">contents</span><span class="p">,</span>
    <span class="nv">subject</span><span class="p">:</span> <span class="s">"Hello World"</span>
<span class="p">)</span>
<span class="n">email</span><span class="o">.</span><span class="n">mailSettings</span> <span class="o">=</span> <span class="p">[</span>
    <span class="kt">Footer</span><span class="p">(</span>
        <span class="nv">enable</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
        <span class="nv">text</span><span class="p">:</span> <span class="s">"Copyright 2016 MyCompany"</span><span class="p">,</span>
        <span class="nv">html</span><span class="p">:</span> <span class="s">"&lt;p&gt;&lt;small&gt;Copyright 2016 MyCompany&lt;/small&gt;&lt;/p&gt;"</span>
    <span class="p">)</span>
<span class="p">]</span>
<span class="n">email</span><span class="o">.</span><span class="n">trackingSettings</span> <span class="o">=</span> <span class="p">[</span>
    <span class="kt">ClickTracking</span><span class="p">(</span><span class="nv">enable</span><span class="p">:</span> <span class="kc">true</span><span class="p">),</span>
    <span class="kt">OpenTracking</span><span class="p">(</span><span class="nv">enable</span><span class="p">:</span> <span class="kc">false</span><span class="p">)</span>
<span class="p">]</span>
<span class="k">do</span> <span class="p">{</span>
    <span class="k">try</span> <span class="kt">Session</span><span class="o">.</span><span class="n">sharedInstance</span><span class="o">.</span><span class="nf">send</span><span class="p">(</span><span class="n">email</span><span class="p">,</span> <span class="nv">onComplete</span><span class="p">:</span> <span class="p">{</span> <span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="n">error</span><span class="p">)</span> <span class="k">in</span>
        <span class="nf">print</span><span class="p">(</span><span class="n">response</span><span class="p">?</span><span class="o">.</span><span class="n">stringValue</span><span class="p">)</span>
    <span class="p">})</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">{</span>
    <span class="nf">print</span><span class="p">(</span><span class="n">error</span><span class="p">)</span>
<span class="p">}</span>
</code></pre>
<a href='#unsubscribe_groups_asm' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h3 id='unsubscribe_groups_asm'>Unsubscribe Groups (ASM)</h3>

<p>If you use SendGrid&rsquo;s <a href="https://sendgrid.com/docs/User_Guide/Suppressions/advanced_suppression_manager.html">unsubscribe groups</a> feature, you can specify which unsubscribe group to send an email under like so:</p>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">personalization</span> <span class="o">=</span> <span class="kt">Personalization</span><span class="p">(</span><span class="nv">recipients</span><span class="p">:</span> <span class="s">"test@example.com"</span><span class="p">)</span>
<span class="k">let</span> <span class="nv">contents</span> <span class="o">=</span> <span class="kt">Content</span><span class="o">.</span><span class="nf">emailContent</span><span class="p">(</span>
    <span class="nv">plain</span><span class="p">:</span> <span class="s">"Hello World"</span><span class="p">,</span>
    <span class="nv">html</span><span class="p">:</span> <span class="s">"&lt;h1&gt;Hello World&lt;/h1&gt;"</span>
<span class="p">)</span>
<span class="k">let</span> <span class="nv">email</span> <span class="o">=</span> <span class="kt">Email</span><span class="p">(</span>
    <span class="nv">personalizations</span><span class="p">:</span> <span class="p">[</span><span class="n">personalization</span><span class="p">],</span>
    <span class="nv">from</span><span class="p">:</span> <span class="kt">Address</span><span class="p">(</span><span class="nv">emailAddress</span><span class="p">:</span> <span class="s">"foo@bar.com"</span><span class="p">),</span>
    <span class="nv">content</span><span class="p">:</span> <span class="n">contents</span><span class="p">,</span>
    <span class="nv">subject</span><span class="p">:</span> <span class="s">"Hello World"</span>
<span class="p">)</span>
<span class="c1">/// Assuming your unsubscribe group has an ID of 4815…</span>
<span class="n">email</span><span class="o">.</span><span class="k">as</span><span class="n">m</span> <span class="o">=</span> <span class="kt">ASM</span><span class="p">(</span><span class="nv">groupID</span><span class="p">:</span> <span class="mi">4815</span><span class="p">)</span>
<span class="k">do</span> <span class="p">{</span>
    <span class="k">try</span> <span class="kt">Session</span><span class="o">.</span><span class="n">sharedInstance</span><span class="o">.</span><span class="nf">send</span><span class="p">(</span><span class="n">email</span><span class="p">,</span> <span class="nv">onComplete</span><span class="p">:</span> <span class="p">{</span> <span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="n">error</span><span class="p">)</span> <span class="k">in</span>
        <span class="nf">print</span><span class="p">(</span><span class="n">response</span><span class="p">?</span><span class="o">.</span><span class="n">stringValue</span><span class="p">)</span>
    <span class="p">})</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">{</span>
    <span class="nf">print</span><span class="p">(</span><span class="n">error</span><span class="p">)</span>
<span class="p">}</span>
</code></pre>

<p>You can also specify which unsubscribe groups should be shown on the subscription management page for this email:</p>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">personalization</span> <span class="o">=</span> <span class="kt">Personalization</span><span class="p">(</span><span class="nv">recipients</span><span class="p">:</span> <span class="s">"test@example.com"</span><span class="p">)</span>
<span class="k">let</span> <span class="nv">contents</span> <span class="o">=</span> <span class="kt">Content</span><span class="o">.</span><span class="nf">emailContent</span><span class="p">(</span>
    <span class="nv">plain</span><span class="p">:</span> <span class="s">"Hello World"</span><span class="p">,</span>
    <span class="nv">html</span><span class="p">:</span> <span class="s">"&lt;h1&gt;Hello World&lt;/h1&gt;"</span>
<span class="p">)</span>
<span class="k">let</span> <span class="nv">email</span> <span class="o">=</span> <span class="kt">Email</span><span class="p">(</span>
    <span class="nv">personalizations</span><span class="p">:</span> <span class="p">[</span><span class="n">personalization</span><span class="p">],</span>
    <span class="nv">from</span><span class="p">:</span> <span class="kt">Address</span><span class="p">(</span><span class="nv">emailAddress</span><span class="p">:</span> <span class="s">"foo@bar.com"</span><span class="p">),</span>
    <span class="nv">content</span><span class="p">:</span> <span class="n">contents</span><span class="p">,</span>
    <span class="nv">subject</span><span class="p">:</span> <span class="s">"Hello World"</span>
<span class="p">)</span>
<span class="c1">/// Assuming your unsubscribe group has an ID of 4815…</span>
<span class="n">email</span><span class="o">.</span><span class="k">as</span><span class="n">m</span> <span class="o">=</span> <span class="kt">ASM</span><span class="p">(</span><span class="nv">groupID</span><span class="p">:</span> <span class="mi">4815</span><span class="p">,</span> <span class="nv">groupsToDisplay</span><span class="p">:</span> <span class="p">[</span><span class="mi">16</span><span class="p">,</span><span class="mi">23</span><span class="p">,</span><span class="mi">42</span><span class="p">])</span>
<span class="k">do</span> <span class="p">{</span>
    <span class="k">try</span> <span class="kt">Session</span><span class="o">.</span><span class="n">sharedInstance</span><span class="o">.</span><span class="nf">send</span><span class="p">(</span><span class="n">email</span><span class="p">,</span> <span class="nv">onComplete</span><span class="p">:</span> <span class="p">{</span> <span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="n">error</span><span class="p">)</span> <span class="k">in</span>
        <span class="nf">print</span><span class="p">(</span><span class="n">response</span><span class="p">?</span><span class="o">.</span><span class="n">stringValue</span><span class="p">)</span>
    <span class="p">})</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">{</span>
    <span class="nf">print</span><span class="p">(</span><span class="n">error</span><span class="p">)</span>
<span class="p">}</span>
</code></pre>
<a href='#ip_pools' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h3 id='ip_pools'>IP Pools</h3>

<p>If you&rsquo;re on a pro plan or higher, and have set up <a href="https://sendgrid.com/docs/API_Reference/Web_API_v3/IP_Management/ip_pools.html">IP Pools</a> on your account, you can specify a specific pool to send an email over like so:</p>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">personalization</span> <span class="o">=</span> <span class="kt">Personalization</span><span class="p">(</span><span class="nv">recipients</span><span class="p">:</span> <span class="s">"test@example.com"</span><span class="p">)</span>
<span class="k">let</span> <span class="nv">contents</span> <span class="o">=</span> <span class="kt">Content</span><span class="o">.</span><span class="nf">emailContent</span><span class="p">(</span>
    <span class="nv">plain</span><span class="p">:</span> <span class="s">"Hello World"</span><span class="p">,</span>
    <span class="nv">html</span><span class="p">:</span> <span class="s">"&lt;h1&gt;Hello World&lt;/h1&gt;"</span>
<span class="p">)</span>
<span class="k">let</span> <span class="nv">email</span> <span class="o">=</span> <span class="kt">Email</span><span class="p">(</span>
    <span class="nv">personalizations</span><span class="p">:</span> <span class="p">[</span><span class="n">personalization</span><span class="p">],</span>
    <span class="nv">from</span><span class="p">:</span> <span class="kt">Address</span><span class="p">(</span><span class="nv">emailAddress</span><span class="p">:</span> <span class="s">"foo@bar.com"</span><span class="p">),</span>
    <span class="nv">content</span><span class="p">:</span> <span class="n">contents</span><span class="p">,</span>
    <span class="nv">subject</span><span class="p">:</span> <span class="s">"Hello World"</span>
<span class="p">)</span>
<span class="c1">/// Assuming you have an IP pool called "transactional" on your account…</span>
<span class="n">email</span><span class="o">.</span><span class="n">ipPoolName</span> <span class="o">=</span> <span class="s">"transactional"</span>
<span class="k">do</span> <span class="p">{</span>
    <span class="k">try</span> <span class="kt">Session</span><span class="o">.</span><span class="n">sharedInstance</span><span class="o">.</span><span class="nf">send</span><span class="p">(</span><span class="n">email</span><span class="p">,</span> <span class="nv">onComplete</span><span class="p">:</span> <span class="p">{</span> <span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="n">error</span><span class="p">)</span> <span class="k">in</span>
        <span class="nf">print</span><span class="p">(</span><span class="n">response</span><span class="p">?</span><span class="o">.</span><span class="n">stringValue</span><span class="p">)</span>
    <span class="p">})</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">{</span>
    <span class="nf">print</span><span class="p">(</span><span class="n">error</span><span class="p">)</span>
<span class="p">}</span>
</code></pre>
<a href='#scheduled_sends' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h3 id='scheduled_sends'>Scheduled Sends</h3>

<p>If you don&rsquo;t want the email to be sent right away, but rather at some point in the future, you can use the <code>sendAt</code> property. <strong>NOTE</strong>: You cannot schedule an email further than 72 hours in the future.  You can also assign an optional, unique <code>batchID</code> to the email so that you can <a href="https://sendgrid.com/docs/API_Reference/Web_API_v3/cancel_schedule_send.html">cancel via the API</a> in the future if needed.</p>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">personalization</span> <span class="o">=</span> <span class="kt">Personalization</span><span class="p">(</span><span class="nv">recipients</span><span class="p">:</span> <span class="s">"test@example.com"</span><span class="p">)</span>
<span class="k">let</span> <span class="nv">contents</span> <span class="o">=</span> <span class="kt">Content</span><span class="o">.</span><span class="nf">emailContent</span><span class="p">(</span>
    <span class="nv">plain</span><span class="p">:</span> <span class="s">"Hello World"</span><span class="p">,</span>
    <span class="nv">html</span><span class="p">:</span> <span class="s">"&lt;h1&gt;Hello World&lt;/h1&gt;"</span>
<span class="p">)</span>
<span class="k">let</span> <span class="nv">email</span> <span class="o">=</span> <span class="kt">Email</span><span class="p">(</span>
    <span class="nv">personalizations</span><span class="p">:</span> <span class="p">[</span><span class="n">personalization</span><span class="p">],</span>
    <span class="nv">from</span><span class="p">:</span> <span class="kt">Address</span><span class="p">(</span><span class="nv">emailAddress</span><span class="p">:</span> <span class="s">"foo@bar.com"</span><span class="p">),</span>
    <span class="nv">content</span><span class="p">:</span> <span class="n">contents</span><span class="p">,</span>
    <span class="nv">subject</span><span class="p">:</span> <span class="s">"Hello World"</span>
<span class="p">)</span>
<span class="c1">// Schedule the email for 24 hours from now.</span>
<span class="n">email</span><span class="o">.</span><span class="n">sendAt</span> <span class="o">=</span> <span class="kt">NSDate</span><span class="p">(</span><span class="nv">timeIntervalSinceNow</span><span class="p">:</span> <span class="mi">24</span> <span class="o">*</span> <span class="mi">60</span> <span class="o">*</span> <span class="mi">60</span><span class="p">)</span>

<span class="c1">// This part is optional, but by setting the batch ID, we have the ability to cancel this send via the API if needed.</span>
<span class="n">email</span><span class="o">.</span><span class="n">batchID</span> <span class="o">=</span> <span class="s">"76A8C7A6-B435-47F5-AB13-15F06BA2E3WD"</span>

<span class="k">do</span> <span class="p">{</span>
    <span class="k">try</span> <span class="kt">Session</span><span class="o">.</span><span class="n">sharedInstance</span><span class="o">.</span><span class="nf">send</span><span class="p">(</span><span class="n">email</span><span class="p">,</span> <span class="nv">onComplete</span><span class="p">:</span> <span class="p">{</span> <span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="n">error</span><span class="p">)</span> <span class="k">in</span>
        <span class="nf">print</span><span class="p">(</span><span class="n">response</span><span class="p">?</span><span class="o">.</span><span class="n">stringValue</span><span class="p">)</span>
    <span class="p">})</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">{</span>
    <span class="nf">print</span><span class="p">(</span><span class="n">error</span><span class="p">)</span>
<span class="p">}</span>
</code></pre>

<p>In the above example, we&rsquo;ve set the <code>sendAt</code> property on the global email, which means every personalization will be scheduled for that time.  You can also set the <code>sendAt</code> property on a <code>Personalization</code> if you want each one to be set to a different time, or only have certain ones scheduled:</p>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">recipientInfo</span><span class="p">:</span> <span class="p">[</span><span class="kt">String</span><span class="p">:</span><span class="kt">NSDate</span><span class="p">?]</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s">"jose@example.none"</span><span class="p">:</span> <span class="kt">NSDate</span><span class="p">(</span><span class="nv">timeIntervalSinceNow</span><span class="p">:</span> <span class="mi">4</span> <span class="o">*</span> <span class="mi">60</span> <span class="o">*</span> <span class="mi">60</span><span class="p">),</span>
    <span class="s">"isaac@example.none"</span><span class="p">:</span> <span class="kc">nil</span><span class="p">,</span>
    <span class="s">"tim@example.none"</span><span class="p">:</span> <span class="kt">NSDate</span><span class="p">(</span><span class="nv">timeIntervalSinceNow</span><span class="p">:</span> <span class="mi">12</span> <span class="o">*</span> <span class="mi">60</span> <span class="o">*</span> <span class="mi">60</span><span class="p">)</span>
<span class="p">]</span>
<span class="k">let</span> <span class="nv">personalizations</span> <span class="o">=</span> <span class="n">recipientInfo</span><span class="o">.</span><span class="n">map</span> <span class="p">{</span> <span class="p">(</span><span class="n">recipient</span><span class="p">,</span> <span class="n">date</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kt">Personalization</span> <span class="k">in</span>
    <span class="k">let</span> <span class="nv">personalization</span> <span class="o">=</span> <span class="kt">Personalization</span><span class="p">(</span><span class="nv">recipients</span><span class="p">:</span> <span class="n">recipient</span><span class="p">)</span>
    <span class="n">personalization</span><span class="o">.</span><span class="n">sendAt</span> <span class="o">=</span> <span class="n">date</span>
    <span class="k">return</span> <span class="n">personalization</span>
<span class="p">}</span>
<span class="k">let</span> <span class="nv">contents</span> <span class="o">=</span> <span class="kt">Content</span><span class="o">.</span><span class="nf">emailContent</span><span class="p">(</span>
    <span class="nv">plain</span><span class="p">:</span> <span class="s">"Hello there,</span><span class="se">\n\n</span><span class="s">How are you?</span><span class="se">\n\n</span><span class="s">Best,</span><span class="se">\n</span><span class="s">Sender"</span><span class="p">,</span>
    <span class="nv">html</span><span class="p">:</span> <span class="s">"&lt;p&gt;Hello there,&lt;/p&gt;&lt;p&gt;How are you?&lt;/p&gt;&lt;p&gt;Best,&lt;br&gt;Sender&lt;/p&gt;"</span>
<span class="p">)</span>
<span class="k">let</span> <span class="nv">email</span> <span class="o">=</span> <span class="kt">Email</span><span class="p">(</span>
    <span class="nv">personalizations</span><span class="p">:</span> <span class="n">personalizations</span><span class="p">,</span>
    <span class="nv">from</span><span class="p">:</span> <span class="kt">Address</span><span class="p">(</span><span class="nv">emailAddress</span><span class="p">:</span> <span class="s">"sender@example.none"</span><span class="p">),</span>
    <span class="nv">content</span><span class="p">:</span> <span class="n">contents</span><span class="p">,</span>
    <span class="nv">subject</span><span class="p">:</span> <span class="kc">nil</span>
<span class="p">)</span>
<span class="k">do</span> <span class="p">{</span>
    <span class="k">try</span> <span class="kt">Session</span><span class="o">.</span><span class="n">sharedInstance</span><span class="o">.</span><span class="nf">send</span><span class="p">(</span><span class="n">email</span><span class="p">,</span> <span class="nv">onComplete</span><span class="p">:</span> <span class="p">{</span> <span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="n">error</span><span class="p">)</span> <span class="k">in</span>
        <span class="nf">print</span><span class="p">(</span><span class="n">response</span><span class="p">?</span><span class="o">.</span><span class="n">stringValue</span><span class="p">)</span>
    <span class="p">})</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">{</span>
    <span class="nf">print</span><span class="p">(</span><span class="n">error</span><span class="p">)</span>
<span class="p">}</span>
</code></pre>
<a href='#categories' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h3 id='categories'>Categories</h3>

<p>You can assign categories to an email which will show up in your SendGrid stats, Email Activity, and event webhook. You can not have more than 10 categories per email.</p>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">personalization</span> <span class="o">=</span> <span class="kt">Personalization</span><span class="p">(</span><span class="nv">recipients</span><span class="p">:</span> <span class="s">"test@example.com"</span><span class="p">)</span>
<span class="k">let</span> <span class="nv">contents</span> <span class="o">=</span> <span class="kt">Content</span><span class="o">.</span><span class="nf">emailContent</span><span class="p">(</span>
    <span class="nv">plain</span><span class="p">:</span> <span class="s">"Hello World"</span><span class="p">,</span>
    <span class="nv">html</span><span class="p">:</span> <span class="s">"&lt;h1&gt;Hello World&lt;/h1&gt;"</span>
<span class="p">)</span>
<span class="k">let</span> <span class="nv">email</span> <span class="o">=</span> <span class="kt">Email</span><span class="p">(</span>
    <span class="nv">personalizations</span><span class="p">:</span> <span class="p">[</span><span class="n">personalization</span><span class="p">],</span>
    <span class="nv">from</span><span class="p">:</span> <span class="kt">Address</span><span class="p">(</span><span class="nv">emailAddress</span><span class="p">:</span> <span class="s">"foo@bar.com"</span><span class="p">),</span>
    <span class="nv">content</span><span class="p">:</span> <span class="n">contents</span><span class="p">,</span>
    <span class="nv">subject</span><span class="p">:</span> <span class="s">"Hello World"</span>
<span class="p">)</span>
<span class="n">email</span><span class="o">.</span><span class="n">categories</span> <span class="o">=</span> <span class="p">[</span><span class="s">"Foo"</span><span class="p">,</span> <span class="s">"Bar"</span><span class="p">]</span>
<span class="k">do</span> <span class="p">{</span>
    <span class="k">try</span> <span class="kt">Session</span><span class="o">.</span><span class="n">sharedInstance</span><span class="o">.</span><span class="nf">send</span><span class="p">(</span><span class="n">email</span><span class="p">,</span> <span class="nv">onComplete</span><span class="p">:</span> <span class="p">{</span> <span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="n">error</span><span class="p">)</span> <span class="k">in</span>
        <span class="nf">print</span><span class="p">(</span><span class="n">response</span><span class="p">?</span><span class="o">.</span><span class="n">stringValue</span><span class="p">)</span>
    <span class="p">})</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">{</span>
    <span class="nf">print</span><span class="p">(</span><span class="n">error</span><span class="p">)</span>
<span class="p">}</span>
</code></pre>
<a href='#sections' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h3 id='sections'>Sections</h3>

<p>Sections allow you to define large blocks of content that can be inserted into your emails using substitution tags. An example of this might look like the following:</p>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">bob</span> <span class="o">=</span> <span class="kt">Personalization</span><span class="p">(</span><span class="nv">recipients</span><span class="p">:</span> <span class="s">"bob@example.com"</span><span class="p">)</span>
<span class="n">bob</span><span class="o">.</span><span class="n">substitutions</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s">":salutation"</span><span class="p">:</span> <span class="s">":male"</span><span class="p">,</span>
    <span class="s">":name"</span><span class="p">:</span> <span class="s">"Bob"</span><span class="p">,</span>
    <span class="s">":event_details"</span><span class="p">:</span> <span class="s">"event2"</span><span class="p">,</span>
    <span class="s">":event_date"</span><span class="p">:</span> <span class="s">"Feb 14"</span>
<span class="p">]</span>

<span class="k">let</span> <span class="nv">alice</span> <span class="o">=</span> <span class="kt">Personalization</span><span class="p">(</span><span class="nv">recipients</span><span class="p">:</span> <span class="s">"alice@example.com"</span><span class="p">)</span>
<span class="n">alice</span><span class="o">.</span><span class="n">substitutions</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s">":salutation"</span><span class="p">:</span> <span class="s">":female"</span><span class="p">,</span>
    <span class="s">":name"</span><span class="p">:</span> <span class="s">"Alice"</span><span class="p">,</span>
    <span class="s">":event_details"</span><span class="p">:</span> <span class="s">"event1"</span><span class="p">,</span>
    <span class="s">":event_date"</span><span class="p">:</span> <span class="s">"Jan 1"</span>
<span class="p">]</span>

<span class="k">let</span> <span class="nv">casey</span> <span class="o">=</span> <span class="kt">Personalization</span><span class="p">(</span><span class="nv">recipients</span><span class="p">:</span> <span class="s">"casey@example.com"</span><span class="p">)</span>
<span class="n">casey</span><span class="o">.</span><span class="n">substitutions</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s">":salutation"</span><span class="p">:</span> <span class="s">":neutral"</span><span class="p">,</span>
    <span class="s">":name"</span><span class="p">:</span> <span class="s">"Casey"</span><span class="p">,</span>
    <span class="s">":event_details"</span><span class="p">:</span> <span class="s">"event1"</span><span class="p">,</span>
    <span class="s">":event_date"</span><span class="p">:</span> <span class="s">"Aug 11"</span>
<span class="p">]</span>

<span class="k">let</span> <span class="nv">personalization</span> <span class="o">=</span> <span class="p">[</span>
    <span class="n">bob</span><span class="p">,</span>
    <span class="n">alice</span><span class="p">,</span>
    <span class="n">casey</span>
<span class="p">]</span>
<span class="k">let</span> <span class="nv">plainText</span> <span class="o">=</span> <span class="s">":salutation,</span><span class="se">\n\n</span><span class="s">Please join us for the :event_details."</span>
<span class="k">let</span> <span class="nv">htmlText</span> <span class="o">=</span> <span class="s">"&lt;p&gt;:salutation,&lt;/p&gt;&lt;p&gt;Please join us for the :event_details.&lt;/p&gt;"</span>
<span class="k">let</span> <span class="nv">content</span> <span class="o">=</span> <span class="kt">Content</span><span class="o">.</span><span class="nf">emailContent</span><span class="p">(</span><span class="nv">plain</span><span class="p">:</span> <span class="n">plainText</span><span class="p">,</span> <span class="nv">html</span><span class="p">:</span> <span class="n">htmlText</span><span class="p">)</span>
<span class="k">let</span> <span class="nv">email</span> <span class="o">=</span> <span class="kt">Email</span><span class="p">(</span>
    <span class="nv">personalizations</span><span class="p">:</span> <span class="n">personalization</span><span class="p">,</span> 
    <span class="nv">from</span><span class="p">:</span> <span class="kt">Address</span><span class="p">(</span><span class="nv">emailAddress</span><span class="p">:</span> <span class="s">"from@example.com"</span><span class="p">),</span> 
    <span class="nv">content</span><span class="p">:</span> <span class="n">content</span>
<span class="p">)</span>
<span class="n">email</span><span class="o">.</span><span class="n">subject</span> <span class="o">=</span> <span class="s">"Hello World"</span>
<span class="n">email</span><span class="o">.</span><span class="n">sections</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s">":male"</span><span class="p">:</span> <span class="s">"Mr. :name"</span><span class="p">,</span>
    <span class="s">":female"</span><span class="p">:</span> <span class="s">"Ms. :name"</span><span class="p">,</span>
    <span class="s">":neutral"</span><span class="p">:</span> <span class="s">":name"</span><span class="p">,</span>
    <span class="s">":event1"</span><span class="p">:</span> <span class="s">"New User Event on :event_date"</span><span class="p">,</span>
    <span class="s">":event2"</span><span class="p">:</span> <span class="s">"Veteran User Appreciation on :event_date"</span>
<span class="p">]</span>
</code></pre>
<a href='#template_engine' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h3 id='template_engine'>Template Engine</h3>

<p>If you use SendGrid&rsquo;s <a href="https://sendgrid.com/docs/User_Guide/Transactional_Templates/index.html">Template Engine</a>, you can specify a template to apply to an email like so:</p>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">personalization</span> <span class="o">=</span> <span class="kt">Personalization</span><span class="p">(</span><span class="nv">recipients</span><span class="p">:</span> <span class="s">"test@example.com"</span><span class="p">)</span>
<span class="k">let</span> <span class="nv">contents</span> <span class="o">=</span> <span class="kt">Content</span><span class="o">.</span><span class="nf">emailContent</span><span class="p">(</span>
    <span class="nv">plain</span><span class="p">:</span> <span class="s">"Hello World"</span><span class="p">,</span>
    <span class="nv">html</span><span class="p">:</span> <span class="s">"&lt;h1&gt;Hello World&lt;/h1&gt;"</span>
<span class="p">)</span>
<span class="k">let</span> <span class="nv">email</span> <span class="o">=</span> <span class="kt">Email</span><span class="p">(</span>
    <span class="nv">personalizations</span><span class="p">:</span> <span class="p">[</span><span class="n">personalization</span><span class="p">],</span>
    <span class="nv">from</span><span class="p">:</span> <span class="kt">Address</span><span class="p">(</span><span class="nv">emailAddress</span><span class="p">:</span> <span class="s">"foo@bar.com"</span><span class="p">),</span>
    <span class="nv">content</span><span class="p">:</span> <span class="n">contents</span><span class="p">,</span>
    <span class="nv">subject</span><span class="p">:</span> <span class="s">"Hello World"</span>
<span class="p">)</span>
<span class="c1">/// Assuming you have a template with ID "52523e14-7e47-45ed-ab32-0db344d8cf9z" on your account…</span>
<span class="n">email</span><span class="o">.</span><span class="n">templateID</span> <span class="o">=</span> <span class="s">"52523e14-7e47-45ed-ab32-0db344d8cf9z"</span>
<span class="k">do</span> <span class="p">{</span>
    <span class="k">try</span> <span class="kt">Session</span><span class="o">.</span><span class="n">sharedInstance</span><span class="o">.</span><span class="nf">send</span><span class="p">(</span><span class="n">email</span><span class="p">,</span> <span class="nv">onComplete</span><span class="p">:</span> <span class="p">{</span> <span class="p">(</span><span class="n">response</span><span class="p">,</span> <span class="n">error</span><span class="p">)</span> <span class="k">in</span>
        <span class="nf">print</span><span class="p">(</span><span class="n">response</span><span class="p">?</span><span class="o">.</span><span class="n">stringValue</span><span class="p">)</span>
    <span class="p">})</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">{</span>
    <span class="nf">print</span><span class="p">(</span><span class="n">error</span><span class="p">)</span>
<span class="p">}</span>
</code></pre>
<a href='#contributing' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h2 id='contributing'>Contributing</h2>

<ol>
<li>Fork it</li>
<li>Create your feature branch (<code>git checkout -b my-fancy-new-feature</code>)</li>
<li>Commit your changes (<code>git commit -am &#39;Added fancy new feature&#39;</code>)</li>
<li>Write tests for any changes and ensure existing tests pass</li>
<li>Push to the branch (<code>git push origin my-fancy-new-feature</code>)</li>
<li>Create a new Pull Request</li>
</ol>
<a href='#license' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h2 id='license'>License</h2>

<p>The MIT License (MIT)</p>

<p>Copyright &copy; 2016 Scott K.</p>

<p>Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the <q>Software</q>), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:</p>

<p>The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.</p>

<p>THE SOFTWARE IS PROVIDED <q>AS IS</q>, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.</p>

          </section>
        </section>
        <section id="footer">
          <p>&copy; 2016 <a class="link" href="https://github.com/scottkawai/sendgrid-swift" target="_blank" rel="external">Scott K.</a>. All rights reserved. (Last updated: 2016-06-28)</p>
          <p>Generated by <a class="link" href="https://github.com/realm/jazzy" target="_blank" rel="external">jazzy ♪♫ v0.6.0</a>, a <a class="link" href="http://realm.io" target="_blank" rel="external">Realm</a> project.</p>
        </section>
      </article>
    </div>
  </body>
</div>
</html>
